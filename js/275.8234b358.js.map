{"version":3,"file":"js/275.8234b358.js","mappings":"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","sources":["webpack://biscuit-paradise/./src/methods/favorite.js","webpack://biscuit-paradise/./src/views/user/Favorite.vue","webpack://biscuit-paradise/./src/views/user/Favorite.vue?6016"],"sourcesContent":["export default {\r\n  addToFavorite (favorite) {\r\n    const favoriteStr = JSON.stringify(favorite)\r\n    localStorage.setItem('favoriteList', favoriteStr)\r\n  },\r\n  getFavorite () {\r\n    return JSON.parse(localStorage.getItem('favoriteList'))\r\n  }\r\n}\r\n\r\n/*\r\n因為localstorage只能存放string字串，因此要使用json將array陣列轉為字串才可存入，而取得資料則須將記憶體的資料再度轉譯成array陣列。\r\n-陣列轉字串：JSON.stringify()\r\n-字串轉陣列 & JSON格式：JSON.parse()\r\n*/","<template>\r\n  <LoadingComp :active=\"isLoading\" />\r\n  <div class=\"container py-lg-3\">\r\n    <nav aria-label=\"breadcrumb\">\r\n      <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item\"><router-link to=\"/user\" active-class=\"active-reset\">首頁</router-link></li>\r\n        <li class=\"breadcrumb-item\">我的最愛</li>\r\n      </ol>\r\n    </nav>\r\n    <h2>\r\n      <i class=\"bi bi-suit-heart-fill fs-3 text-danger\"/> 我的最愛\r\n    </h2>\r\n    <hr />\r\n    <div class=\"row\">\r\n      <div class=\"col-lg-8\">\r\n        <div\r\n          class=\"text-center pb-5\"\r\n          :class=\"{ 'd-none': favoriteProducts.length !== 0 }\"\r\n        >\r\n          <i\r\n            class=\"bi bi-suit-heart-fill text-danger\"\r\n            style=\"font-size: 150px\"\r\n          />\r\n          <p class=\"fs-2\">我的最愛是空的，來去收藏吧!</p>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-outline-primary shadow-sm fw-bold\"\r\n            @click=\"$router.push('/user/productList')\"\r\n          >\r\n            收藏更多餅乾\r\n          </button>\r\n        </div>\r\n        <div\r\n          class=\"border border-primary d-flex flex-column  flex-md-row justify-content-between align-items-center p-3 mb-3 text-center\"\r\n          v-for=\"item in favoriteProducts\"\r\n          :key=\"item.id\"\r\n        >\r\n          <img\r\n            :src=\"item.imageUrl\"\r\n            class=\"productImg img-fluid\"\r\n            :alt=\"item.title\"\r\n            @click=\"getProduct(item.id)\"\r\n            style=\"cursor:pointer;\"\r\n          />\r\n          <p class=\"h5 pt-ms-0 pt-3\">{{ item.title }}</p>\r\n          <div class=\"d-flex flex-column\">\r\n            <p class=\"h5 mb-md-0\" v-if=\"item.price === item.origin_price\">\r\n              {{ $formatFilters.currency(item.origin_price) }} 元\r\n            </p>\r\n            <del class=\"h6\" v-if=\"item.price !== item.origin_price\"\r\n              >原價 {{ $formatFilters.currency(item.origin_price) }} 元</del\r\n            >\r\n            <p class=\"h5 text-danger\" v-if=\"item.price !== item.origin_price\">\r\n              特價 {{ $formatFilters.currency(item.price) }} 元\r\n            </p>\r\n          </div>\r\n          <div class=\"d-flex\">\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-primary btnCircle mx-2 rounded-circle fs-4 text-white\"\r\n              @click=\"addCart(item, item.id)\"\r\n            >\r\n              <i class=\"bi bi-cart-plus\"/>\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-primary btnCircle mx-2 rounded-circle fs-4 text-white\"\r\n              @click=\"removeFavorite(item, item.id)\"\r\n            >\r\n              <i class=\"bi bi-trash\"/>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-md-4\">\r\n        <img\r\n          src=\"https://images.unsplash.com/photo-1612845575953-f4b1e3d63160?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8Y29va2llfGVufDB8fDB8fHww\"\r\n          alt=\"我的最愛\"\r\n          class=\"img-fluid d-none d-lg-block\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.productImg {\r\n  width: 150px;\r\n  height: 100px;\r\n  -o-object-fit: cover;\r\n  object-fit: cover;\r\n}\r\n.active-reset {\r\n  text-decoration: none;\r\n  color: #212529;\r\n}\r\n</style>\r\n\r\n<script>\r\nimport favorite from '@/methods/favorite'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      favoriteProducts: [],\r\n      favorite: favorite.getFavorite() || [],\r\n      isLoading: false,\r\n      status: {\r\n        loadingItem: ''\r\n      }\r\n    }\r\n  },\r\n  inject: ['emitter'],\r\n  methods: {\r\n    getFavorite () {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.isLoading = true\r\n      this.$http.get(api).then((res) => {\r\n        if (res.data.success) {\r\n          this.favoriteProducts = res.data.products.filter((item) =>\r\n            this.favorite.includes(item.id)\r\n          )\r\n        }\r\n        this.isLoading = false\r\n      })\r\n    },\r\n    addCart (item, id) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.isLoading = true\r\n      this.status.loadingItem = id\r\n      const cart = {\r\n        product_id: id,\r\n        qty: 1\r\n      }\r\n      this.$http.post(url, { data: cart }).then((res) => {\r\n        this.status.loadingItem = ''\r\n        this.emitter.emit('update-cart', id)\r\n        this.isLoading = false\r\n        this.$httpMessageState(res, `將\"${item.title}\"加入購物車`)\r\n      })\r\n    },\r\n    getProduct (id) {\r\n      this.$router.push(`/products/${id}`)\r\n    },\r\n    removeFavorite (item, id) {\r\n      this.isLoading = true\r\n      this.favorite.splice(this.favorite.indexOf(id), 1)\r\n      favorite.addToFavorite(this.favorite)\r\n      this.emitter.emit('update-favorite', this.favorite)\r\n      this.$httpMessageState(\r\n        {\r\n          data: {\r\n            success: true\r\n          }\r\n        },\r\n        `將\"${item.title}\"移除我的最愛`\r\n      )\r\n      this.getFavorite()\r\n    }\r\n  },\r\n  created () {\r\n    this.getFavorite()\r\n  }\r\n}\r\n</script>","import { render } from \"./Favorite.vue?vue&type=template&id=4592e62e&scoped=true\"\nimport script from \"./Favorite.vue?vue&type=script&lang=js\"\nexport * from \"./Favorite.vue?vue&type=script&lang=js\"\n\nimport \"./Favorite.vue?vue&type=style&index=0&id=4592e62e&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4592e62e\"]])\n\nexport default __exports__"],"names":["addToFavorite","favorite","favoriteStr","JSON","stringify","localStorage","setItem","getFavorite","parse","getItem","class","_createElementVNode","_createTextVNode","style","key","_hoisted_20","_hoisted_23","src","alt","_createElementBlock","_Fragment","_createVNode","_component_LoadingComp","active","$data","isLoading","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_component_router_link","to","default","_withCtx","_","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_normalizeClass","favoriteProducts","length","_hoisted_10","_hoisted_11","type","onClick","_cache","$event","_ctx","$router","push","_renderList","item","id","imageUrl","title","$options","getProduct","_hoisted_12","_hoisted_13","_toDisplayString","_hoisted_14","price","origin_price","_hoisted_15","$formatFilters","currency","_createCommentVNode","_hoisted_16","_hoisted_17","_hoisted_18","addCart","_hoisted_21","_hoisted_19","removeFavorite","_hoisted_24","_hoisted_22","_hoisted_25","data","status","loadingItem","inject","methods","api","this","$http","get","then","res","success","products","filter","includes","url","cart","product_id","qty","post","emitter","emit","$httpMessageState","splice","indexOf","created","__exports__","render"],"sourceRoot":""}